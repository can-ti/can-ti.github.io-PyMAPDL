
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />



    
        
    <title>PyMAPDL language and usage &#8212; PyMAPDL</title>
    




  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=5b4479735964841361fd" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=5b4479735964841361fd" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css?v=61a4c737" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css?v=f4aeca0c" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css?v=2082cf3c" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
    <link rel="stylesheet" type="text/css" href="../_static/css\ansys_sphinx_theme.css?v=4f651e51" />
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.23/css/jquery.dataTables.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=11ae5704" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=5b4479735964841361fd" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd" />
  <script src="../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=5b4479735964841361fd"></script>
 
<link href="../_static/css/breadcrumbs.css" rel="stylesheet" />

    <script src="../_static/documentation_options.js?v=c67ccf4f"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/thebelab-helper.js"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=49e1bf35"></script>
    <script src="../_static/js\table.js?v=b64f5182"></script>
    <script src="https://cdn.datatables.net/1.10.23/js/jquery.dataTables.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script src="../_static/design-tabs.js?v=36754332"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-JQJKPV6ZVB"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-JQJKPV6ZVB');
            </script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-JQJKPV6ZVB');
            </script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'user_guide/mapdl';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.14.4';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://mapdl.docs.pyansys.com/versions.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '0.68';
        DOCUMENTATION_OPTIONS.show_version_warning_banner = false;
        </script>
    <link rel="icon" href="../_static/ansys-favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Translate scripts" href="convert.html" />
    <link rel="prev" title="User guide" href="index.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container"><!-- Debugging: html_theme_options =  -->
 
<!-- Include the MeiliSearch CSS stylesheet only if theme present -->
<link href="../_static/css/meilisearch.css" rel="stylesheet" />

<!-- Create a search bar form with a text input and a dropdown selector for the search index -->
<form
  class="bd-search d-flex align-items-center"
  action="../search.html"
  method="get"
>
  <i class="fa fa-search" aria-hidden="true" id="search-icon"></i>
  <input
    type="search"
    placeholder="Search"
    class="form-control"
    id="search-bar-input"
    autofocus
  />
  <span class="search-button__kbd-shortcut"
    ><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span
  >
  <style>
    .bd-search .search-button__kbd-shortcut {
      right: 33%;
    }
  </style>
  
  <select id="indexUidSelector" class="index-select">
    
    <option value="pymapdl-v0-68">PyMAPDL</option>
    
  </select>
  
  <!-- Include the MeiliSearch JavaScript library for the search bar -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"></script>

    
  <script>
    var HOST_URL = "https://backend.search.pyansys.com/";
    var API_KEY = "";
    var indexUid = "pymapdl-v0-68";
  </script>

  <script src="../_static/js/meilisearch_theme_wrap.js"></script>
</form>
</div>
  </div>
   
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/pyansys-logo-black-cropped.png" class="logo__image only-light" alt="PyMAPDL - Home"/>
    <script>document.write(`<img src="../_static/pyansys-logo-black-cropped.png" class="logo__image only-dark" alt="PyMAPDL - Home"/>`);</script>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../getting_started/index.html">
                        Getting started
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">
                        User guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../mapdl_commands/index.html">
                        MAPDL commands
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../api/index.html">
                        API reference
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../api_ff/index.html">
                        ff_API
                      </a>
                    </li>
                
            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../examples/index.html">
                        Examples
                      </a>
                    </li>
                
                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-2"
      type="button"
      class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-2"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-2"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-2">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/ansys/pymapdl" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/ansys/pymapdl/discussions" title="Support" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa fa-comment fa-fw fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Support</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://mapdl.docs.pyansys.com/version/dev/getting_started/contribution.html" title="Contribute" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa fa-wrench fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Contribute</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary" tabindex="0">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
    <div id="announcement_msg"></div>
<script>
  fetch("announcement.html")
    .then((response) => {
      if (!response.ok) {
        throw new Error(`HTTP error: ${response.status}`);
      }
      return response.text();
    })
    .then(
      (text) => (document.getElementById("announcement_msg").innerHTML = text),
    )
    .catch((error) => console.error(`Fetch problem: ${error.message}`));
</script>  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item">
<nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../getting_started/index.html">
                        Getting started
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">
                        User guide
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../mapdl_commands/index.html">
                        MAPDL commands
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../api/index.html">
                        API reference
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../api_ff/index.html">
                        ff_API
                      </a>
                    </li>
                
            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-nav-more-links-2">
                    More
                </button>
                <ul id="pst-nav-more-links-2" class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../examples/index.html">
                        Examples
                      </a>
                    </li>
                
                </ul>
            </li>
            
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-3"
      type="button"
      class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-3"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-3"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-3">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/ansys/pymapdl" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/ansys/pymapdl/discussions" title="Support" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa fa-comment fa-fw fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Support</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://mapdl.docs.pyansys.com/version/dev/getting_started/contribution.html" title="Contribute" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa fa-wrench fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Contribute</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">PyMAPDL language and usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="convert.html">Translate scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="mesh_geometry.html">Mesh and geometry</a></li>
<li class="toctree-l1"><a class="reference internal" href="plotting.html">Interactive plotting</a></li>
<li class="toctree-l1"><a class="reference internal" href="parameters.html">Setting and retrieving parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="components.html">Managing components</a></li>
<li class="toctree-l1"><a class="reference internal" href="post.html">Postprocessing</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">PyMAPDL command line interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="mapdl_examples.html">ANSYS APDL interactive control examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="database.html">Access MAPDL database</a></li>
<li class="toctree-l1"><a class="reference internal" href="math.html">PyAnsys Math overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="pool.html">Create a pool of MAPDL instances</a></li>
<li class="toctree-l1"><a class="reference internal" href="xpl.html">File explorer overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="upf.html">Using Python to code UPF subroutines</a></li>
<li class="toctree-l1"><a class="reference internal" href="krylov_method.html">Harmonic analysis using the Krylov method</a></li>






<li class="toctree-l1"><a class="reference internal" href="troubleshoot.html">Troubleshooting PyMAPDL</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">
<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
         
    <li class="breadcrumb-item breadcrumb-home">
      <a href="https://docs.pyansys.com/" class="nav-link">PyAnsys</a>
    </li>
     
    <li class="breadcrumb-item">
      <a
        href="../index.html"
        class="nav-link"
        aria-label="Home"
      >
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
     
    <li class="breadcrumb-item">
      <a href="index.html" class="nav-link">User guide</a>
    </li>
      
    <li class="breadcrumb-item active" aria-current="page">PyMAPDL language and usage</li>
    
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="pymapdl-language-and-usage">
<span id="ref-mapdl-user-guide"></span><h1>PyMAPDL language and usage<a class="headerlink" href="#pymapdl-language-and-usage" title="Link to this heading">#</a></h1>
<p>本页概述了 <code class="xref py py-class docutils literal notranslate"><span class="pre">Mapdl</span></code> 类的 PyMAPDL API。更多信息，请参阅 <a class="reference internal" href="../api/mapdl.html#ref-mapdl-api"><span class="std std-ref">Mapdl module</span></a>。</p>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">#</a></h2>
<p>在以函数形式调用 MAPDL 命令时，每个命令都已从其原始的 MAPDL 全大写格式转换为 PEP8 兼容格式。例如， <code class="docutils literal notranslate"><span class="pre">ESEL</span></code> 现在是 <a class="reference internal" href="../mapdl_commands/database/_autosummary/ansys.mapdl.core.Mapdl.esel.html#ansys.mapdl.core.Mapdl.esel" title="ansys.mapdl.core.Mapdl.esel"><code class="xref py py-func docutils literal notranslate"><span class="pre">Mapdl.esel()</span></code></a> 方法。</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-0" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" data-sync-id="key1" for="sd-tab-item-0">
APDL</label><div class="sd-tab-content docutils">
<div class="highlight-apdl notranslate"><div class="highlight"><pre><span></span><span class="c">! Selecting elements whose centroid x coordinate</span>
<span class="c">! is between 1 and 2.</span>
<span class="k">ESEL</span><span class="p">,</span><span class="w"> </span><span class="nv">S</span><span class="p">,</span><span class="w"> </span><span class="nv">CENT</span><span class="p">,</span><span class="w"> </span><span class="nv">X</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-1" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" data-sync-id="key2" for="sd-tab-item-1">
Python</label><div class="sd-tab-content docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Selecting elements whose centroid x coordinate</span>
<span class="c1"># is between 1 and 2.</span>
<span class="c1"># returns an array of selected elements ids</span>
<span class="n">mapdl</span><span class="o">.</span><span class="n">esel</span><span class="p">(</span><span class="s2">&quot;S&quot;</span><span class="p">,</span> <span class="s2">&quot;CENT&quot;</span><span class="p">,</span> <span class="s2">&quot;X&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>此外，包含 <code class="docutils literal notranslate"><span class="pre">/</span></code> 或 <code class="docutils literal notranslate"><span class="pre">*</span></code> 的 MAPDL 命令已删除这些字符，除非这会导致与现有名称冲突。
最值得注意的是 <code class="docutils literal notranslate"><span class="pre">/SOLU</span></code> ，它会与 <code class="docutils literal notranslate"><span class="pre">SOLU</span></code> 冲突。因此， <code class="docutils literal notranslate"><span class="pre">/SOLU</span></code> 被重命名为 <a class="reference internal" href="../mapdl_commands/session/_autosummary/ansys.mapdl.core.Mapdl.slashsolu.html#ansys.mapdl.core.Mapdl.slashsolu" title="ansys.mapdl.core.Mapdl.slashsolu"><code class="xref py py-func docutils literal notranslate"><span class="pre">Mapdl.slashsolu()</span></code></a> 方法，
以区别于 <code class="docutils literal notranslate"><span class="pre">solu</span></code>。
在 1500 条 MAPDL 命令中，约有 15 条以 <code class="docutils literal notranslate"><span class="pre">斜线</span> <span class="pre">(/)</span></code> 开头， 8 条以 <code class="docutils literal notranslate"><span class="pre">星号</span> <span class="pre">(*)</span></code> 开头。</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-2" name="sd-tab-set-1" type="radio">
</input><label class="sd-tab-label" data-sync-id="key1" for="sd-tab-item-2">
APDL</label><div class="sd-tab-content docutils">
<div class="highlight-apdl notranslate"><div class="highlight"><pre><span></span><span class="k">*STATUS</span>
<span class="k">/SOLU</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-3" name="sd-tab-set-1" type="radio">
</input><label class="sd-tab-label" data-sync-id="key2" for="sd-tab-item-3">
Python</label><div class="sd-tab-content docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mapdl</span><span class="o">.</span><span class="n">startstatus</span><span class="p">()</span>
<span class="n">mapdl</span><span class="o">.</span><span class="n">slashsolu</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>可以接受空格作为参数的 MAPDL 命令，如 <code class="docutils literal notranslate"><span class="pre">ESEL,S,TYPE,,1</span></code> ，在被 Python 调用时应包含空字符串，或者，可以使用关键字参数来调用这些命令：</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-4" name="sd-tab-set-2" type="radio">
</input><label class="sd-tab-label" data-sync-id="key1" for="sd-tab-item-4">
APDL</label><div class="sd-tab-content docutils">
<div class="highlight-apdl notranslate"><div class="highlight"><pre><span></span><span class="k">ESEL</span><span class="p">,</span><span class="nv">S</span><span class="p">,</span><span class="nv">TYPE</span><span class="p">,,</span><span class="mi">1</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-5" name="sd-tab-set-2" type="radio">
</input><label class="sd-tab-label" data-sync-id="key2" for="sd-tab-item-5">
Python</label><div class="sd-tab-content docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mapdl</span><span class="o">.</span><span class="n">esel</span><span class="p">(</span><span class="s2">&quot;s&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">mapdl</span><span class="o">.</span><span class="n">esel</span><span class="p">(</span><span class="s2">&quot;s&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>这些限制都不适用于使用 <a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.Mapdl.run.html#ansys.mapdl.core.Mapdl.run" title="ansys.mapdl.core.Mapdl.run"><code class="xref py py-func docutils literal notranslate"><span class="pre">Mapdl.run()</span></code></a> 方法运行的命令。运行这些命令中的某些命令（如 <code class="docutils literal notranslate"><span class="pre">&quot;/SOLU&quot;</span></code>）可能会更容易：</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-6" name="sd-tab-set-3" type="radio">
</input><label class="sd-tab-label" data-sync-id="key1" for="sd-tab-item-6">
APDL</label><div class="sd-tab-content docutils">
<div class="highlight-apdl notranslate"><div class="highlight"><pre><span></span><span class="k">/SOLU</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-7" name="sd-tab-set-3" type="radio">
</input><label class="sd-tab-label" data-sync-id="key2" for="sd-tab-item-7">
Python</label><div class="sd-tab-content docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 接下来的三个功能是等价的。进入求解处理器。</span>
<span class="n">mapdl</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;/SOLU&quot;</span><span class="p">)</span>
<span class="n">mapdl</span><span class="o">.</span><span class="n">slashsolu</span><span class="p">()</span>
<span class="n">mapdl</span><span class="o">.</span><span class="n">solution</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<section id="selecting-entities">
<h3>Selecting entities<a class="headerlink" href="#selecting-entities" title="Link to this heading">#</a></h3>
<p>您可以使用这些方法选择节点或线条等实体：</p>
<ul class="simple">
<li><p><a class="reference internal" href="../mapdl_commands/database/_autosummary/ansys.mapdl.core.Mapdl.nsel.html#ansys.mapdl.core.Mapdl.nsel" title="ansys.mapdl.core.Mapdl.nsel"><code class="xref py py-func docutils literal notranslate"><span class="pre">Mapdl.nsel()</span></code></a></p></li>
<li><p><a class="reference internal" href="../mapdl_commands/database/_autosummary/ansys.mapdl.core.Mapdl.esel.html#ansys.mapdl.core.Mapdl.esel" title="ansys.mapdl.core.Mapdl.esel"><code class="xref py py-func docutils literal notranslate"><span class="pre">Mapdl.esel()</span></code></a></p></li>
<li><p><a class="reference internal" href="../mapdl_commands/database/_autosummary/ansys.mapdl.core.Mapdl.ksel.html#ansys.mapdl.core.Mapdl.ksel" title="ansys.mapdl.core.Mapdl.ksel"><code class="xref py py-func docutils literal notranslate"><span class="pre">Mapdl.ksel()</span></code></a></p></li>
<li><p><a class="reference internal" href="../mapdl_commands/database/_autosummary/ansys.mapdl.core.Mapdl.lsel.html#ansys.mapdl.core.Mapdl.lsel" title="ansys.mapdl.core.Mapdl.lsel"><code class="xref py py-func docutils literal notranslate"><span class="pre">Mapdl.lsel()</span></code></a></p></li>
<li><p><a class="reference internal" href="../mapdl_commands/database/_autosummary/ansys.mapdl.core.Mapdl.asel.html#ansys.mapdl.core.Mapdl.asel" title="ansys.mapdl.core.Mapdl.asel"><code class="xref py py-func docutils literal notranslate"><span class="pre">Mapdl.asel()</span></code></a></p></li>
<li><p><a class="reference internal" href="../mapdl_commands/database/_autosummary/ansys.mapdl.core.Mapdl.vsel.html#ansys.mapdl.core.Mapdl.vsel" title="ansys.mapdl.core.Mapdl.vsel"><code class="xref py py-func docutils literal notranslate"><span class="pre">Mapdl.vsel()</span></code></a></p></li>
</ul>
<p>上述方法会返回所选实体的 ID。例如</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">selected_nodes</span> <span class="o">=</span> <span class="n">mapdl</span><span class="o">.</span><span class="n">nsel</span><span class="p">(</span><span class="s2">&quot;S&quot;</span><span class="p">,</span> <span class="s2">&quot;NODE&quot;</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">2000</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">selected_nodes</span><span class="p">)</span>
<span class="go">array([   1    2    3 ... 1998 1999 2000])</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mapdl</span><span class="o">.</span><span class="n">ksel</span><span class="p">(</span><span class="s2">&quot;all&quot;</span><span class="p">)</span>
<span class="go">array([1, 2, 3, ..., 1998, 1999, 2000])</span>
</pre></div>
</div>
</section>
<section id="running-in-non-interactive-mode">
<h3>Running in non-interactive mode<a class="headerlink" href="#running-in-non-interactive-mode" title="Link to this heading">#</a></h3>
<p>有些命令只能在脚本中以非交互方式运行。PyMAPDL 通过将命令写入临时输入文件，然后读取输入文件来绕过这一限制。
要运行一组必须非交互式运行的命令，通过使用 <code class="xref py py-func docutils literal notranslate"><span class="pre">Mapdl.non_interactive()</span></code> 方法，
将 <code class="xref py py-class docutils literal notranslate"><span class="pre">Mapdl</span></code> 类设置为以输入文件的形式运行一系列命令。下面是一个示例：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">mapdl</span><span class="o">.</span><span class="n">non_interactive</span><span class="p">:</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;*VWRITE,LABEL(1),VALUE(1,1),VALUE(1,2),VALUE(1,3)&quot;</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;(1X,A8,&#39;   &#39;,F10.1,&#39;  &#39;,F10.1,&#39;   &#39;,1F5.3)&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>然后，您可以使用 <a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.Mapdl.last_response.html#ansys.mapdl.core.Mapdl.last_response" title="ansys.mapdl.core.Mapdl.last_response"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapdl.last_response</span></code></a> 属性查看非交互式上下文的最终响应。</p>
<p>使用 <a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.Mapdl.non_interactive.html#ansys.mapdl.core.Mapdl.non_interactive" title="ansys.mapdl.core.Mapdl.non_interactive"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Mapdl.non_interactive()</span></code></a> 方法也可以在服务器端运行命令，
而无需 Python 的交互。这可以大大加快速度，但您应该了解 APDL 是如何工作的。关于 PyMAPDL 和 APDL 速度比较的有趣讨论，
请参阅 <a class="reference external" href="https://github.com/ansys/pymapdl/discussions/757">PyMAPDL 和 APDL</a> 。</p>
<p>应谨慎使用 <a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.Mapdl.non_interactive.html#ansys.mapdl.core.Mapdl.non_interactive" title="ansys.mapdl.core.Mapdl.non_interactive"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Mapdl.non_interactive()</span></code></a> 方法。</p>
<section id="how-the-non-interactive-context-manager-works">
<h4>How the non-interactive context manager works<a class="headerlink" href="#how-the-non-interactive-context-manager-works" title="Link to this heading">#</a></h4>
<p>在Python中，上下文管理器（context manager）是一种用于管理资源的机制。它提供了一种可靠的方式来打开、使用和关闭资源，无论是否发生异常。上下文管理器通过使用with语句来实现，可以确保资源的正确分配和释放，避免资源泄漏和错误处理的繁琐。
<a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.Mapdl.non_interactive.html#ansys.mapdl.core.Mapdl.non_interactive" title="ansys.mapdl.core.Mapdl.non_interactive"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Mapdl.non_interactive()</span></code></a> 方法便是通过 <a class="reference external" href="https://docs.python.org/3/reference/datamodel.html#with-statement-context-managers">上下文管理器</a> 实现的，这意味着在进入和退出上下文时会发生一些操作。
进入上下文时，<code class="xref py py-class docutils literal notranslate"><span class="pre">Mapdl</span></code> 实例将停止向 MAPDL 实例发送任何 APDL 命令。
相反，它会为这些 APDL 命令分配一个缓冲区。对于该上下文中的每一条 PyMAPDL 命令，PyMAPDL 都会在该缓冲区中存储相应的 MAPDL 命令。
在退出上下文之前，PyMAPDL 会创建一个包含所有这些 APDL 命令的文本文件，将其发送到 MAPDL 实例，并使用 <a class="reference internal" href="../mapdl_commands/session/_autosummary/ansys.mapdl.core.Mapdl.input.html#ansys.mapdl.core.Mapdl.input" title="ansys.mapdl.core.Mapdl.input"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Mapdl.input()</span></code></a> 方法运行它。</p>
<p>例如，本示例代码使用 <a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.Mapdl.non_interactive.html#ansys.mapdl.core.Mapdl.non_interactive" title="ansys.mapdl.core.Mapdl.non_interactive"><code class="xref py py-meth docutils literal notranslate"><span class="pre">non_interactive</span> <span class="pre">context</span></code></a> 方法为 MAPDL 生成输入：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">mapdl</span><span class="o">.</span><span class="n">non_interactive</span><span class="p">:</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">nsel</span><span class="p">(</span><span class="s2">&quot;all&quot;</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">nsel</span><span class="p">(</span><span class="s2">&quot;R&quot;</span><span class="p">,</span> <span class="s2">&quot;LOC&quot;</span><span class="p">,</span> <span class="s2">&quot;Z&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>前面的代码为 MAPDL 生成了这一输入：</p>
<div class="highlight-apdl notranslate"><div class="highlight"><pre><span></span><span class="k">NSEL</span><span class="p">,</span><span class="nv">ALL</span>
<span class="k">NSEL</span><span class="p">,</span><span class="nv">R</span><span class="p">,</span><span class="nv">LOC</span><span class="p">,</span><span class="nv">Z</span><span class="p">,</span><span class="mi">10</span>
</pre></div>
</div>
<p>该 MAPLD 输入通过 <a class="reference internal" href="../mapdl_commands/session/_autosummary/ansys.mapdl.core.Mapdl.input.html#ansys.mapdl.core.Mapdl.input" title="ansys.mapdl.core.Mapdl.input"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Mapdl.input()</span></code></a> 方法调用执行。</p>
<p>由于非交互式上下文直到最后才运行所有命令，你可能会发现在其中与 Python 等进行交互时会出现问题。
例如，在上下文中运行 Python 命令，如 <a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.Mapdl.get_array.html#ansys.mapdl.core.Mapdl.get_array" title="ansys.mapdl.core.Mapdl.get_array"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Mapdl.get_array()</span></code></a> 方法，可能会得到不同步的响应。
下面的代码片段就是这类问题的演示：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create some keypoints</span>
<span class="n">mapdl</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
<span class="n">mapdl</span><span class="o">.</span><span class="n">k</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">mapdl</span><span class="o">.</span><span class="n">k</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="k">with</span> <span class="n">mapdl</span><span class="o">.</span><span class="n">non_interactive</span><span class="p">:</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">k</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">klist_inside</span> <span class="o">=</span> <span class="n">mapdl</span><span class="o">.</span><span class="n">get_array</span><span class="p">(</span><span class="s2">&quot;KP&quot;</span><span class="p">,</span> <span class="n">item1</span><span class="o">=</span><span class="s2">&quot;KLIST&quot;</span><span class="p">)</span>
    <span class="c1"># Here is where PyMAPDL sends the commands to the MAPDL instance and execute &#39;mapdl.k(3,2,0,0)&#39;</span>

<span class="n">klist_outside</span> <span class="o">=</span> <span class="n">mapdl</span><span class="o">.</span><span class="n">get_array</span><span class="p">(</span><span class="s2">&quot;KP&quot;</span><span class="p">,</span> <span class="n">item1</span><span class="o">=</span><span class="s2">&quot;KLIST&quot;</span><span class="p">)</span>

<span class="k">assert</span> <span class="n">klist_inside</span> <span class="o">!=</span> <span class="n">klist_outside</span>  <span class="c1"># Evaluates to true 计算结果为true</span>
</pre></div>
</div>
<p>在前面的脚本中，通过 <a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.Mapdl.get_array.html#ansys.mapdl.core.Mapdl.get_array" title="ansys.mapdl.core.Mapdl.get_array"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Mapdl.get_array()</span></code></a> 方法获得的值是不同的：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">klist_inside</span><span class="p">)</span>
<span class="go">array([1., 2.])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">klist_outside</span><span class="p">)</span>
<span class="go">array([1., 2., 3.])</span>
</pre></div>
</div>
<p>这是因为第一个 <a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.Mapdl.get_array.html#ansys.mapdl.core.Mapdl.get_array" title="ansys.mapdl.core.Mapdl.get_array"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Mapdl.get_array()</span></code></a> 方法调用是在 <a class="reference internal" href="../mapdl_commands/prep7/_autosummary/ansys.mapdl.core.Mapdl.k.html#ansys.mapdl.core.Mapdl.k" title="ansys.mapdl.core.Mapdl.k"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Mapdl.k()</span></code></a> 方法调用之前执行的。</p>
<p>在使用 <a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.Mapdl.non_interactive.html#ansys.mapdl.core.Mapdl.non_interactive" title="ansys.mapdl.core.Mapdl.non_interactive"><code class="xref py py-meth docutils literal notranslate"><span class="pre">non_interactive</span> <span class="pre">context</span></code></a> 方法时，不应以 Pythonic 方式从 MAPDL 实例获取任何数据。
了解这种行为以及 <a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.Mapdl.non_interactive.html#ansys.mapdl.core.Mapdl.non_interactive" title="ansys.mapdl.core.Mapdl.non_interactive"><code class="xref py py-meth docutils literal notranslate"><span class="pre">non_interactive</span> <span class="pre">context</span></code></a> 方法如何工作，对于 PyMAPDL 的高级使用至关重要。</p>
</section>
</section>
<section id="mapdl-macros">
<h3>MAPDL macros<a class="headerlink" href="#mapdl-macros" title="Link to this heading">#</a></h3>
<p>请注意，在 PyMAPDL 中创建的宏 (而不是从文件中加载的宏) 似乎不能正确运行。例如，下面是在 APDL 和 PyMAPDL 中使用 <code class="docutils literal notranslate"><span class="pre">*CREATE</span></code> 命令创建的 <code class="docutils literal notranslate"><span class="pre">DISP</span></code> 宏：</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-8" name="sd-tab-set-4" type="radio">
</input><label class="sd-tab-label" data-sync-id="key1" for="sd-tab-item-8">
APDL</label><div class="sd-tab-content docutils">
<div class="highlight-apdl notranslate"><div class="highlight"><pre><span></span><span class="c">! SELECT NODES AT Z = 10 TO APPLY DISPLACEMENT</span>
<span class="k">*CREATE</span><span class="p">,</span><span class="nv">DISP</span>
<span class="k">NSEL</span><span class="p">,</span><span class="nv">R</span><span class="p">,</span><span class="nv">LOC</span><span class="p">,</span><span class="nv">Z</span><span class="p">,</span><span class="mi">10</span>
<span class="k">D</span><span class="p">,</span><span class="nv">ALL</span><span class="p">,</span><span class="nv">UZ</span><span class="p">,</span><span class="nv">ARG1</span>
<span class="k">NSEL</span><span class="p">,</span><span class="nv">ALL</span>
<span class="o">/</span><span class="nv">OUT</span><span class="p">,</span><span class="nv">SCRATCH</span>
<span class="k">SOLVE</span>
<span class="k">*END</span>

<span class="c">! Call the function</span>
<span class="k">*USE</span><span class="p">,</span><span class="nv">DISP</span><span class="p">,</span><span class="mf">-.032</span>
<span class="k">*USE</span><span class="p">,</span><span class="nv">DISP</span><span class="p">,</span><span class="mf">-.05</span>
<span class="k">*USE</span><span class="p">,</span><span class="nv">DISP</span><span class="p">,</span><span class="mf">-.1</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-9" name="sd-tab-set-4" type="radio">
</input><label class="sd-tab-label" data-sync-id="key2" for="sd-tab-item-9">
Python</label><div class="sd-tab-content docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">DISP</span><span class="p">(</span>
    <span class="n">ARG1</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">ARG2</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">ARG3</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">ARG4</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">ARG5</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">ARG6</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">ARG7</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">ARG8</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">ARG9</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">ARG10</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">ARG11</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">ARG12</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">ARG13</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">ARG14</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">ARG15</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">ARG16</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">ARG17</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">ARG18</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="p">):</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">nsel</span><span class="p">(</span><span class="s2">&quot;R&quot;</span><span class="p">,</span> <span class="s2">&quot;LOC&quot;</span><span class="p">,</span> <span class="s2">&quot;Z&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>  <span class="c1"># SELECT NODES AT Z = 10 TO APPLY DISPLACEMENT</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">d</span><span class="p">(</span><span class="s2">&quot;ALL&quot;</span><span class="p">,</span> <span class="s2">&quot;UZ&quot;</span><span class="p">,</span> <span class="n">ARG1</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">nsel</span><span class="p">(</span><span class="s2">&quot;ALL&quot;</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;/OUT,SCRATCH&quot;</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">solve</span><span class="p">()</span>


<span class="n">DISP</span><span class="p">(</span><span class="o">-</span><span class="mf">0.032</span><span class="p">)</span>
<span class="n">DISP</span><span class="p">(</span><span class="o">-</span><span class="mf">0.05</span><span class="p">)</span>
<span class="n">DISP</span><span class="p">(</span><span class="o">-</span><span class="mf">0.1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>如果您有一个包含宏的现有输入文件，可以使用 <code class="xref py py-func docutils literal notranslate"><span class="pre">convert_script()</span></code> 方法进行转换，同时设置 <code class="docutils literal notranslate"><span class="pre">macros_as_functions=True</span></code> ：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ansys.mapdl</span> <span class="kn">import</span> <span class="n">core</span> <span class="k">as</span> <span class="n">pymapdl</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pymapdl</span><span class="o">.</span><span class="n">convert_script</span><span class="p">(</span><span class="n">apdl_inputfile</span><span class="p">,</span> <span class="n">pyscript</span><span class="p">,</span> <span class="n">macros_as_functions</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="additional-options-when-running-commands">
<h3>Additional options when running commands<a class="headerlink" href="#additional-options-when-running-commands" title="Link to this heading">#</a></h3>
<p>命令可以在 <code class="docutils literal notranslate"><span class="pre">mute</span></code> 或 <code class="docutils literal notranslate"><span class="pre">verbose</span></code> 模式下运行，这允许您在运行任何 MAPDL 命令时抑制或打印输出。
这对于像 <code class="docutils literal notranslate"><span class="pre">SOLVE</span></code> 这样长时间运行的命令尤其有用。这适用于所有命令的 Pythonic 封装，以及使用 <a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.Mapdl.run.html#ansys.mapdl.core.Mapdl.run" title="ansys.mapdl.core.Mapdl.run"><code class="xref py py-func docutils literal notranslate"><span class="pre">Mapdl.run()</span></code></a> 方法时。</p>
<p>运行命令并抑制其输出：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mapdl</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;/PREP7&quot;</span><span class="p">,</span> <span class="n">mute</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapdl</span><span class="o">.</span><span class="n">prep7</span><span class="p">(</span><span class="n">mute</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>运行命令并在其运行时对其输出进行流式处理：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mapdl</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;SOLVE&quot;</span><span class="p">,</span> <span class="n">mute</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapdl</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">verbose</span></code> 和 <code class="docutils literal notranslate"><span class="pre">mute</span></code> 功能仅在以 gRPC 模式运行 MAPDL 时可用。</p>
</div>
</section>
<section id="running-several-commands-or-an-input-file">
<h3>Running several commands or an input file<a class="headerlink" href="#running-several-commands-or-an-input-file" title="Link to this heading">#</a></h3>
<p>您可以使用 <a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.Mapdl.input_strings.html#ansys.mapdl.core.Mapdl.input_strings" title="ansys.mapdl.core.Mapdl.input_strings"><code class="xref py py-func docutils literal notranslate"><span class="pre">Mapdl.input_strings()</span></code></a> 方法将多个 MAPDL 命令作为一个统一的块运行。这在将 PyMAPDL 与旧的 MAPDL 脚本一起使用时非常有用。例如：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cmd</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;/prep7</span>
<span class="s2">! Mat</span>
<span class="s2">MP,EX,1,200000</span>
<span class="s2">MP,NUXY,1,0.3</span>
<span class="s2">MP,DENS,1,7.85e-09</span>
<span class="s2">! Elements</span>
<span class="s2">et,1,186</span>
<span class="s2">! Geometry</span>
<span class="s2">BLC4,0,0,1000,100,10</span>
<span class="s2">! Mesh</span>
<span class="s2">esize,5</span>
<span class="s2">vmesh,all&quot;&quot;&quot;</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">resp</span> <span class="o">=</span> <span class="n">mapdl</span><span class="o">.</span><span class="n">input_strings</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">resp</span>
<span class="go">You have already entered the general preprocessor (PREP7).</span>

<span class="go">MATERIAL          1     EX   =   200000.0</span>

<span class="go">MATERIAL          1     NUXY =  0.3000000</span>

<span class="go">MATERIAL          1     DENS =  0.7850000E-08</span>

<span class="go">ELEMENT TYPE          1 IS SOLID186     3-D 20-NODE STRUCTURAL SOLID</span>
<span class="go">KEYOPT( 1- 6)=        0      0      0        0      0      0</span>
<span class="go">KEYOPT( 7-12)=        0      0      0        0      0      0</span>
<span class="go">KEYOPT(13-18)=        0      0      0        0      0      0</span>

<span class="go">CURRENT NODAL DOF SET IS  UX    UY    UZ</span>
<span class="go">THREE-DIMENSIONAL MODEL</span>

<span class="go">CREATE A HEXAHEDRAL VOLUME WITH</span>
<span class="go">X-DISTANCES FROM      0.000000000     TO      1000.000000</span>
<span class="go">Y-DISTANCES FROM      0.000000000     TO      100.0000000</span>
<span class="go">Z-DISTANCES FROM      0.000000000     TO      10.00000000</span>

<span class="go">    OUTPUT VOLUME =     1</span>

<span class="go">DEFAULT ELEMENT DIVISIONS PER LINE BASED ON ELEMENT SIZE =   5.00</span>

<span class="go">GENERATE NODES AND ELEMENTS   IN  ALL  SELECTED VOLUMES</span>

<span class="go">NUMBER OF VOLUMES MESHED   =         1</span>
<span class="go">MAXIMUM NODE NUMBER        =     45765</span>
<span class="go">MAXIMUM ELEMENT NUMBER     =      8000</span>
</pre></div>
</div>
<p>或者，您可以简单地将命令写入文件，然后使用 <a class="reference internal" href="../mapdl_commands/session/_autosummary/ansys.mapdl.core.Mapdl.input.html#ansys.mapdl.core.Mapdl.input" title="ansys.mapdl.core.Mapdl.input"><code class="xref py py-func docutils literal notranslate"><span class="pre">Mapdl.input()</span></code></a> 方法运行该文件。例如，如果您有一个从 Ansys Mechanical 生成的 <code class="docutils literal notranslate"><span class="pre">&quot;ds.dat&quot;</span></code> 文件，您可以使用以下方法运行该文件：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">resp</span> <span class="o">=</span> <span class="n">mapdl</span><span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="s2">&quot;ds.dat&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id1">
<h3>条件语句和循环<a class="headerlink" href="#id1" title="Link to this heading">#</a></h3>
<p>APDL 条件语句，如 <code class="docutils literal notranslate"><span class="pre">*IF</span></code> 必须用 Python 实现，或使用 <a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.Mapdl.non_interactive.html#ansys.mapdl.core.Mapdl.non_interactive" title="ansys.mapdl.core.Mapdl.non_interactive"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapdl.non_interactive</span></code></a> 属性。例如</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-10" name="sd-tab-set-5" type="radio">
</input><label class="sd-tab-label" data-sync-id="key1" for="sd-tab-item-10">
APDL</label><div class="sd-tab-content docutils">
<div class="highlight-apdl notranslate"><div class="highlight"><pre><span></span><span class="k">*IF</span><span class="p">,</span><span class="nv">ARG1</span><span class="p">,</span><span class="nv">EQ</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="nv">THEN</span>
<span class="k">*GET</span><span class="p">,</span><span class="nv">ARG4</span><span class="p">,</span><span class="nv">NX</span><span class="p">,</span><span class="nv">ARG2</span><span class="w">     </span><span class="c">! RETRIEVE COORDINATE LOCATIONS OF BOTH NODES</span>
<span class="k">*GET</span><span class="p">,</span><span class="nv">ARG5</span><span class="p">,</span><span class="nv">NY</span><span class="p">,</span><span class="nv">ARG2</span>
<span class="k">*GET</span><span class="p">,</span><span class="nv">ARG6</span><span class="p">,</span><span class="nv">NZ</span><span class="p">,</span><span class="nv">ARG2</span>
<span class="k">*GET</span><span class="p">,</span><span class="nv">ARG7</span><span class="p">,</span><span class="nv">NX</span><span class="p">,</span><span class="nv">ARG3</span>
<span class="k">*GET</span><span class="p">,</span><span class="nv">ARG8</span><span class="p">,</span><span class="nv">NY</span><span class="p">,</span><span class="nv">ARG3</span>
<span class="k">*GET</span><span class="p">,</span><span class="nv">ARG9</span><span class="p">,</span><span class="nv">NZ</span><span class="p">,</span><span class="nv">ARG3</span>
<span class="k">*ELSE</span>
<span class="k">*GET</span><span class="p">,</span><span class="nv">ARG4</span><span class="p">,</span><span class="nv">KX</span><span class="p">,</span><span class="nv">ARG2</span><span class="w">     </span><span class="c">! RETRIEVE COORDINATE LOCATIONS OF BOTH KEYPOINTS</span>
<span class="k">*GET</span><span class="p">,</span><span class="nv">ARG5</span><span class="p">,</span><span class="nv">KY</span><span class="p">,</span><span class="nv">ARG2</span>
<span class="k">*GET</span><span class="p">,</span><span class="nv">ARG6</span><span class="p">,</span><span class="nv">KZ</span><span class="p">,</span><span class="nv">ARG2</span>
<span class="k">*GET</span><span class="p">,</span><span class="nv">ARG7</span><span class="p">,</span><span class="nv">KX</span><span class="p">,</span><span class="nv">ARG3</span>
<span class="k">*GET</span><span class="p">,</span><span class="nv">ARG8</span><span class="p">,</span><span class="nv">KY</span><span class="p">,</span><span class="nv">ARG3</span>
<span class="k">*GET</span><span class="p">,</span><span class="nv">ARG9</span><span class="p">,</span><span class="nv">KZ</span><span class="p">,</span><span class="nv">ARG3</span>
<span class="k">*ENDIF</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-11" name="sd-tab-set-5" type="radio">
</input><label class="sd-tab-label" data-sync-id="key3" for="sd-tab-item-11">
Python-Non interactive</label><div class="sd-tab-content docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">mapdl</span><span class="o">.</span><span class="n">non_interactive</span><span class="p">:</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;*IF,ARG1,EQ,0,THEN&quot;</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;*GET,ARG4,NX,ARG2     &quot;</span><span class="p">)</span>  <span class="c1"># RETRIEVE COORDINATE LOCATIONS OF BOTH NODES</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;*GET,ARG5,NY,ARG2&quot;</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;*GET,ARG6,NZ,ARG2&quot;</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;*GET,ARG7,NX,ARG3&quot;</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;*GET,ARG8,NY,ARG3&quot;</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;*GET,ARG9,NZ,ARG3&quot;</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;*ELSE&quot;</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
        <span class="s2">&quot;*GET,ARG4,KX,ARG2     &quot;</span>
    <span class="p">)</span>  <span class="c1"># RETRIEVE COORDINATE LOCATIONS OF BOTH KEYPOINTS</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;*GET,ARG5,KY,ARG2&quot;</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;*GET,ARG6,KZ,ARG2&quot;</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;*GET,ARG7,KX,ARG3&quot;</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;*GET,ARG8,KY,ARG3&quot;</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;*GET,ARG9,KZ,ARG3&quot;</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;*ENDIF&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-12" name="sd-tab-set-5" type="radio">
</input><label class="sd-tab-label" data-sync-id="key2" for="sd-tab-item-12">
Python</label><div class="sd-tab-content docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">ARG1</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ARG4</span><span class="p">,</span> <span class="s2">&quot;NX&quot;</span><span class="p">,</span> <span class="n">ARG2</span><span class="p">)</span>  <span class="c1"># RETRIEVE COORDINATE LOCATIONS OF BOTH NODES</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ARG5</span><span class="p">,</span> <span class="s2">&quot;NY&quot;</span><span class="p">,</span> <span class="n">ARG2</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ARG6</span><span class="p">,</span> <span class="s2">&quot;NZ&quot;</span><span class="p">,</span> <span class="n">ARG2</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ARG7</span><span class="p">,</span> <span class="s2">&quot;NX&quot;</span><span class="p">,</span> <span class="n">ARG3</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ARG8</span><span class="p">,</span> <span class="s2">&quot;NY&quot;</span><span class="p">,</span> <span class="n">ARG3</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ARG9</span><span class="p">,</span> <span class="s2">&quot;NZ&quot;</span><span class="p">,</span> <span class="n">ARG3</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ARG4</span><span class="p">,</span> <span class="s2">&quot;KX&quot;</span><span class="p">,</span> <span class="n">ARG2</span><span class="p">)</span>  <span class="c1"># RETRIEVE COORDINATE LOCATIONS OF BOTH KEYPOINTS</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ARG5</span><span class="p">,</span> <span class="s2">&quot;KY&quot;</span><span class="p">,</span> <span class="n">ARG2</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ARG6</span><span class="p">,</span> <span class="s2">&quot;KZ&quot;</span><span class="p">,</span> <span class="n">ARG2</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ARG7</span><span class="p">,</span> <span class="s2">&quot;KX&quot;</span><span class="p">,</span> <span class="n">ARG3</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ARG8</span><span class="p">,</span> <span class="s2">&quot;KY&quot;</span><span class="p">,</span> <span class="n">ARG3</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ARG9</span><span class="p">,</span> <span class="s2">&quot;KZ&quot;</span><span class="p">,</span> <span class="n">ARG3</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>参数 <code class="docutils literal notranslate"><span class="pre">ARGX</span></code> 的值不会从 MAPDL 实例中获取。因此，除非使用以下命令，否则无法在 Python 代码中使用这些参数：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ARG4</span> <span class="o">=</span> <span class="n">mapdl</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;ARG4&quot;</span><span class="p">]</span>
<span class="n">ARG5</span> <span class="o">=</span> <span class="n">mapdl</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;ARG5&quot;</span><span class="p">]</span>
<span class="c1"># ...</span>
<span class="c1"># etc</span>
</pre></div>
</div>
<p>使用 <code class="docutils literal notranslate"><span class="pre">*DO</span></code> 或 <code class="docutils literal notranslate"><span class="pre">*DOWHILE</span></code> 的 APDL 循环也应使用 <a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.Mapdl.non_interactive.html#ansys.mapdl.core.Mapdl.non_interactive" title="ansys.mapdl.core.Mapdl.non_interactive"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapdl.non_interactive</span></code></a> 属性或以 Python 方式实现。</p>
</section>
<section id="warnings-and-errors">
<h3>Warnings and errors<a class="headerlink" href="#warnings-and-errors" title="Link to this heading">#</a></h3>
<p>错误以 Pythonical 的方式处理。例如：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">solve</span><span class="p">()</span>
<span class="k">except</span><span class="p">:</span>
    <span class="c1"># do something else with MAPDL</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>在 MAPDL 中被忽略的命令会被标记为错误。这与 MAPDL 的默认行为不同，后者将被忽略的命令作为警告处理。例如，在 <code class="docutils literal notranslate"><span class="pre">ansys-mapdl-core</span></code> 中，在错误的会话中运行命令会引发错误：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mapdl</span><span class="o">.</span><span class="n">finish</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapdl</span><span class="o">.</span><span class="n">k</span><span class="p">()</span>

<span class="go">Exception:</span>
<span class="go">K, , , ,</span>

<span class="go"> *** WARNING ***                         CP =       0.307   TIME= 11:05:01</span>
<span class="go"> K is not a recognized BEGIN command, abbreviation, or macro.  This</span>
<span class="go"> command will be ignored.</span>
</pre></div>
</div>
<p>您可以使用 <a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.Mapdl.ignore_errors.html#ansys.mapdl.core.Mapdl.ignore_errors" title="ansys.mapdl.core.Mapdl.ignore_errors"><code class="xref py py-func docutils literal notranslate"><span class="pre">Mapdl.ignore_errors()</span></code></a> 函数来更改此行为，以便将忽略的命令记录为警告而不是异常。例如</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mapdl</span><span class="o">.</span><span class="n">ignore_errors</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapdl</span><span class="o">.</span><span class="n">k</span><span class="p">()</span>  <span class="c1"># warning silently ignored</span>
</pre></div>
</div>
</section>
<section id="prompts">
<h3>Prompts 提示<a class="headerlink" href="#prompts" title="Link to this heading">#</a></h3>
<p>来自 MAPDL 的提示会自动继续，就像 MAPDL 处于批处理模式一样。需要用户输入的命令，如 <a class="reference internal" href="../mapdl_commands/apdl/_autosummary/ansys.mapdl.core.Mapdl.vwrite.html#ansys.mapdl.core.Mapdl.vwrite" title="ansys.mapdl.core.Mapdl.vwrite"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Mapdl.vwrite()</span></code></a> 方法会失败，必须以非交互方式输入。</p>
</section>
</section>
<section id="apdl-command-logging">
<h2>APDL command logging<a class="headerlink" href="#apdl-command-logging" title="Link to this heading">#</a></h2>
<p>虽然 <code class="docutils literal notranslate"><span class="pre">ansys-mapdl-core</span></code> 的设计目的是使通过使用 Python 调用 APDL 会话来控制 APDL 会话变得更容易，但可能有必要使用 PyMAPDL 脚本生成的输入文件再次调用 MAPDL。使用 <code class="docutils literal notranslate"><span class="pre">log_apdl=&quot;apdl.log&quot;</span></code> 参数可以自动启用这一点。
启用此参数后，<code class="xref py py-class docutils literal notranslate"><span class="pre">Mapdl</span></code> 类将把运行的每个命令写入活动的 <a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.Mapdl.directory.html#ansys.mapdl.core.Mapdl.directory" title="ansys.mapdl.core.Mapdl.directory"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapdl.directory</span></code></a> 中名为 <code class="docutils literal notranslate"><span class="pre">&quot;apdl.log&quot;</span></code> 的日志文件。</p>
<p>例如：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ansys.mapdl.core</span> <span class="kn">import</span> <span class="n">launch_mapdl</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">ansys</span> <span class="o">=</span> <span class="n">launch_mapdl</span><span class="p">(</span><span class="n">log_apdl</span><span class="o">=</span><span class="s2">&quot;apdl.log&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ansys</span><span class="o">.</span><span class="n">prep7</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ansys</span><span class="o">.</span><span class="n">k</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ansys</span><span class="o">.</span><span class="n">k</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ansys</span><span class="o">.</span><span class="n">k</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ansys</span><span class="o">.</span><span class="n">k</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>这段代码会将以下内容写入 <code class="docutils literal notranslate"><span class="pre">&quot;apdl.log&quot;</span></code> 文件：</p>
<div class="highlight-apdl notranslate"><div class="highlight"><pre><span></span><span class="k">/PREP7</span><span class="p">,</span>
<span class="k">K</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span>
<span class="k">K</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span>
<span class="k">K</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span>
<span class="k">K</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span>
</pre></div>
</div>
<p>除条件语句、循环或函数外，这允许将 Python 脚本转换为 APDL 脚本。</p>
<section id="use-the-lgwrite-method">
<h3>Use the <code class="docutils literal notranslate"><span class="pre">lgwrite</span></code> method<a class="headerlink" href="#use-the-lgwrite-method" title="Link to this heading">#</a></h3>
<p>另外，如果只需要数据库命令输出，可以使用 <code class="xref py py-func docutils literal notranslate"><span class="pre">Mapdl.lgwrite</span></code> 方法将整个数据库命令日志写入文件。</p>
</section>
</section>
<section id="interactive-breakpoint">
<h2>Interactive breakpoint 交互式断点<a class="headerlink" href="#interactive-breakpoint" title="Link to this heading">#</a></h2>
<p>在大多数情况下，有必要或最好打开 MAPDL GUI。<code class="xref py py-class docutils literal notranslate"><span class="pre">Mapdl</span></code> 类有 <a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.Mapdl.open_gui.html#ansys.mapdl.core.Mapdl.open_gui" title="ansys.mapdl.core.Mapdl.open_gui"><code class="xref py py-func docutils literal notranslate"><span class="pre">Mapdl.open_gui()</span></code></a> 方法，
它允许您无缝地打开图形用户界面，而不会丢失工作或重新启动会话。例如</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ansys.mapdl.core</span> <span class="kn">import</span> <span class="n">launch_mapdl</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapdl</span> <span class="o">=</span> <span class="n">launch_mapdl</span><span class="p">()</span>
</pre></div>
</div>
<p>使用关键点创建正方形区域</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mapdl</span><span class="o">.</span><span class="n">prep7</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapdl</span><span class="o">.</span><span class="n">k</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapdl</span><span class="o">.</span><span class="n">k</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapdl</span><span class="o">.</span><span class="n">k</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapdl</span><span class="o">.</span><span class="n">k</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapdl</span><span class="o">.</span><span class="n">l</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapdl</span><span class="o">.</span><span class="n">l</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapdl</span><span class="o">.</span><span class="n">l</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapdl</span><span class="o">.</span><span class="n">l</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapdl</span><span class="o">.</span><span class="n">al</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<p>打开图形用户界面</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mapdl</span><span class="o">.</span><span class="n">open_gui</span><span class="p">()</span>
</pre></div>
</div>
<p>从上次中断的地方继续</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mapdl</span><span class="o">.</span><span class="n">et</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;MESH200&quot;</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapdl</span><span class="o">.</span><span class="n">amesh</span><span class="p">(</span><span class="s2">&quot;all&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapdl</span><span class="o">.</span><span class="n">eplot</span><span class="p">()</span>
</pre></div>
</div>
<p>这种方法避免了在交互会话和脚本会话之间来回切换的麻烦。相反，你可以使用一个脚本会话，
然后从脚本会话中打开图形用户界面，而不会丢失工作或进度。此外，在图形用户界面中进行的任何更改都不会影响脚本。
您可以在图形用户界面中进行实验，而脚本则不受影响。</p>
</section>
<section id="run-a-batch-job">
<h2>Run a batch job<a class="headerlink" href="#run-a-batch-job" title="Link to this heading">#</a></h2>
<p>您可以定义一个运行 MAPDL 的函数，而不是通过调用输入文件来运行 MAPDL 批处理。此示例根据扭转载荷下圆柱体的最大应力运行网格收敛研究。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">ansys.mapdl.core</span> <span class="kn">import</span> <span class="n">launch_mapdl</span>


<span class="k">def</span> <span class="nf">cylinder_batch</span><span class="p">(</span><span class="n">elemsize</span><span class="p">,</span> <span class="n">plot</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;报告悬臂支撑圆柱体的最大 von Mises 应力&quot;&quot;&quot;</span>

    <span class="c1"># clear</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">finish</span><span class="p">()</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

    <span class="c1"># cylinder parameters</span>
    <span class="n">radius</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">h_tip</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">height</span> <span class="o">=</span> <span class="mi">20</span>
    <span class="n">force</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">/</span> <span class="n">radius</span>
    <span class="n">pressure</span> <span class="o">=</span> <span class="n">force</span> <span class="o">/</span> <span class="p">(</span><span class="n">h_tip</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">radius</span><span class="p">)</span>

    <span class="n">mapdl</span><span class="o">.</span><span class="n">prep7</span><span class="p">()</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">et</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">186</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">et</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">154</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">r</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">r</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

    <span class="c1"># Aluminum(铝) properties (or something)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">mp</span><span class="p">(</span><span class="s2">&quot;ex&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">10e6</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">mp</span><span class="p">(</span><span class="s2">&quot;nuxy&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">mp</span><span class="p">(</span><span class="s2">&quot;dens&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.1</span> <span class="o">/</span> <span class="mf">386.1</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">mp</span><span class="p">(</span><span class="s2">&quot;dens&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="c1"># Simple cylinder</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
        <span class="n">mapdl</span><span class="o">.</span><span class="n">cylind</span><span class="p">(</span><span class="n">radius</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="mi">90</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">),</span> <span class="mi">90</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span>

    <span class="n">mapdl</span><span class="o">.</span><span class="n">nummrg</span><span class="p">(</span><span class="s2">&quot;kp&quot;</span><span class="p">)</span>

    <span class="c1"># mesh cylinder</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">lsel</span><span class="p">(</span><span class="s2">&quot;s&quot;</span><span class="p">,</span> <span class="s2">&quot;loc&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">lsel</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="s2">&quot;loc&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">lsel</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="s2">&quot;loc&quot;</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">height</span> <span class="o">-</span> <span class="n">h_tip</span><span class="p">)</span>
    <span class="c1"># mapdl.lesize(&#39;all&#39;, elemsize*2)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">mshape</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">mshkey</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">esize</span><span class="p">(</span><span class="n">elemsize</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">allsel</span><span class="p">(</span><span class="s2">&quot;all&quot;</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">vsweep</span><span class="p">(</span><span class="s2">&quot;ALL&quot;</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">csys</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">asel</span><span class="p">(</span><span class="s2">&quot;s&quot;</span><span class="p">,</span> <span class="s2">&quot;loc&quot;</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">height</span> <span class="o">-</span> <span class="n">h_tip</span> <span class="o">+</span> <span class="mf">0.0001</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">asel</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="s2">&quot;loc&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="n">radius</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">local</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">csys</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">aatt</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">11</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">amesh</span><span class="p">(</span><span class="s2">&quot;all&quot;</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">finish</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">plot</span><span class="p">:</span>
        <span class="n">mapdl</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">mapdl</span><span class="o">.</span><span class="n">eplot</span><span class="p">()</span>

    <span class="c1"># new solution</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">slashsolu</span><span class="p">()</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">antype</span><span class="p">(</span><span class="s2">&quot;static&quot;</span><span class="p">,</span> <span class="s2">&quot;new&quot;</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">eqslv</span><span class="p">(</span><span class="s2">&quot;pcg&quot;</span><span class="p">,</span> <span class="mf">1e-8</span><span class="p">)</span>

    <span class="c1"># Apply tangential pressure 施加切向压力</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">esel</span><span class="p">(</span><span class="s2">&quot;s&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">sfe</span><span class="p">(</span><span class="s2">&quot;all&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;pres&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">pressure</span><span class="p">)</span>

    <span class="c1"># Constrain bottom of cylinder/rod</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">asel</span><span class="p">(</span><span class="s2">&quot;s&quot;</span><span class="p">,</span> <span class="s2">&quot;loc&quot;</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">nsla</span><span class="p">(</span><span class="s2">&quot;s&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="n">mapdl</span><span class="o">.</span><span class="n">d</span><span class="p">(</span><span class="s2">&quot;all&quot;</span><span class="p">,</span> <span class="s2">&quot;all&quot;</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">allsel</span><span class="p">()</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">psf</span><span class="p">(</span><span class="s2">&quot;pres&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">pbc</span><span class="p">(</span><span class="s2">&quot;u&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">solve</span><span class="p">()</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">finish</span><span class="p">()</span>

    <span class="c1"># access results using MAPDL object 使用 MAPDL 对象访问结果</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">mapdl</span><span class="o">.</span><span class="n">result</span>

    <span class="c1"># 要访问您可以运行的结果，请执行以下操作：</span>
    <span class="c1"># from ansys.mapdl import reader as pymapdl_reader</span>
    <span class="c1"># resultfile = os.path.join(mapdl.path, &#39;%s.rst&#39; % mapdl.jobname)</span>
    <span class="c1"># result = pymapdl_reader.read_binary(result file)</span>

    <span class="c1"># 获取结果 1 处的最大 von Mises 应力</span>
    <span class="c1"># Index 0 as it&#39;s zero based indexing</span>
    <span class="n">nodenum</span><span class="p">,</span> <span class="n">stress</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">principal_nodal_stress</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

    <span class="c1"># von Mises 应力是最后一列</span>
    <span class="c1"># 必须为 nanmax，因为没有记录壳单元应力</span>
    <span class="n">maxstress</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmax</span><span class="p">(</span><span class="n">stress</span><span class="p">[:,</span> <span class="o">-</span><span class="mi">1</span><span class="p">])</span>

    <span class="c1"># 返回节点数和最大应力</span>
    <span class="k">return</span> <span class="n">nodenum</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="n">maxstress</span>


<span class="c1"># 初始化 MAPDL</span>
<span class="n">mapdl</span> <span class="o">=</span> <span class="n">launch_mapdl</span><span class="p">(</span><span class="n">override</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">loglevel</span><span class="o">=</span><span class="s2">&quot;ERROR&quot;</span><span class="p">)</span>

<span class="c1"># 调用 MAPDL 反复求解</span>
<span class="n">result_summ</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">elemsize</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.15</span><span class="p">,</span> <span class="mi">15</span><span class="p">):</span>
    <span class="c1"># 运行批处理并报告结果</span>
    <span class="n">nnode</span><span class="p">,</span> <span class="n">maxstress</span> <span class="o">=</span> <span class="n">cylinder_batch</span><span class="p">(</span><span class="n">elemsize</span><span class="p">,</span> <span class="n">plot</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">result_summ</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">nnode</span><span class="p">,</span> <span class="n">maxstress</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span>
        <span class="s2">&quot;Element size </span><span class="si">%f</span><span class="s2">: </span><span class="si">%6d</span><span class="s2"> nodes and maximum vom Mises stress </span><span class="si">%f</span><span class="s2">&quot;</span>
        <span class="o">%</span> <span class="p">(</span><span class="n">elemsize</span><span class="p">,</span> <span class="n">nnode</span><span class="p">,</span> <span class="n">maxstress</span><span class="p">)</span>
    <span class="p">)</span>

<span class="c1"># Exit MAPDL</span>
<span class="n">mapdl</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
</pre></div>
</div>
<p>下面是脚本的输出结果：</p>
<div class="highlight-output notranslate"><div class="highlight"><pre><span></span><span class="go">Element size 0.600000:   9657 nodes and maximum vom Mises stress 142.623505</span>
<span class="go">Element size 0.567857:  10213 nodes and maximum vom Mises stress 142.697800</span>
<span class="go">Element size 0.535714:  10769 nodes and maximum vom Mises stress 142.766510</span>
<span class="go">Element size 0.503571:  14177 nodes and maximum vom Mises stress 142.585388</span>
<span class="go">Element size 0.471429:  18371 nodes and maximum vom Mises stress 142.825684</span>
<span class="go">Element size 0.439286:  19724 nodes and maximum vom Mises stress 142.841202</span>
<span class="go">Element size 0.407143:  21412 nodes and maximum vom Mises stress 142.945984</span>
<span class="go">Element size 0.375000:  33502 nodes and maximum vom Mises stress 142.913437</span>
<span class="go">Element size 0.342857:  37877 nodes and maximum vom Mises stress 143.033401</span>
<span class="go">Element size 0.310714:  59432 nodes and maximum vom Mises stress 143.328842</span>
<span class="go">Element size 0.278571:  69106 nodes and maximum vom Mises stress 143.176086</span>
<span class="go">Element size 0.246429: 110547 nodes and maximum vom Mises stress 143.499329</span>
<span class="go">Element size 0.214286: 142496 nodes and maximum vom Mises stress 143.559128</span>
<span class="go">Element size 0.182143: 211966 nodes and maximum vom Mises stress 143.953430</span>
<span class="go">Element size 0.150000: 412324 nodes and maximum vom Mises stress 144.275406</span>
</pre></div>
</div>
</section>
<section id="chain-commands-in-mapdl">
<h2>Chain commands in MAPDL<a class="headerlink" href="#chain-commands-in-mapdl" title="Link to this heading">#</a></h2>
<p>MAPDL 通过使用分隔符 <code class="docutils literal notranslate"><span class="pre">&quot;$&quot;</span></code> 允许在一行中执行多个命令。在 PyMAPDL 中，可以有效地将多个命令链在一起，然后发送给 MAPDL 执行，
而不是单独执行。当你需要在一个 Python 循环中执行数千条命令，而不需要每条命令的单独结果时，命令链会很有帮助。
例如，如果您想沿 X 轴创建 1000 个关键点，您可以运行：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">xloc</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">xloc</span><span class="p">:</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">k</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
<p>但是，由于每条命令都是单独执行并返回响应的，因此将要由 MAPDL 执行的命令分组发送，
并让 <code class="xref py py-class docutils literal notranslate"><span class="pre">Mapdl</span></code> 类通过使用 <a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.Mapdl.chain_commands.html#ansys.mapdl.core.Mapdl.chain_commands" title="ansys.mapdl.core.Mapdl.chain_commands"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapdl.chain_commands</span></code></a> 属性来处理命令分组会更快。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">xloc</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="k">with</span> <span class="n">mapdl</span><span class="o">.</span><span class="n">chain_commands</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">xloc</span><span class="p">:</span>
        <span class="n">mapdl</span><span class="o">.</span><span class="n">k</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
<p>使用这种方法的执行时间通常比单独运行每条命令快 4 到 10 倍。然后，您可以使用 <a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.Mapdl.last_response.html#ansys.mapdl.core.Mapdl.last_response" title="ansys.mapdl.core.Mapdl.last_response"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapdl.last_response</span></code></a> 属性查看链式命令的最终响应。</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>分布式 MAPDL 不支持命令链。为提高性能，请使用 <code class="docutils literal notranslate"><span class="pre">mute=True</span></code> 或 <a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.Mapdl.non_interactive.html#ansys.mapdl.core.Mapdl.non_interactive" title="ansys.mapdl.core.Mapdl.non_interactive"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapdl.non_interactive</span></code></a> 上下文管理器。</p>
</div>
</section>
<section id="sending-arrays-to-mapdl">
<h2>Sending arrays to MAPDL<a class="headerlink" href="#sending-arrays-to-mapdl" title="Link to this heading">#</a></h2>
<p>您可以使用 <a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.Mapdl.parameters.html#ansys.mapdl.core.Mapdl.parameters" title="ansys.mapdl.core.Mapdl.parameters"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapdl.Parameters</span></code></a> 属性直接向 MAPDL 发送 <code class="docutils literal notranslate"><span class="pre">numpy</span></code> 数组或 Python 列表。
这比使用 <a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.Mapdl.run.html#ansys.mapdl.core.Mapdl.run" title="ansys.mapdl.core.Mapdl.run"><code class="xref py py-func docutils literal notranslate"><span class="pre">Mapdl.run()</span></code></a> 方法通过 Python 单独向 MAPDL 发送参数要有效得多，因为它在幕后使用了 <code class="xref py py-func docutils literal notranslate"><span class="pre">Mapdl.vread()</span></code> 方法。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ansys.mapdl.core</span> <span class="kn">import</span> <span class="n">launch_mapdl</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">mapdl</span> <span class="o">=</span> <span class="n">launch_mapdl</span><span class="p">()</span>
<span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="n">mapdl</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;MYARR&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">arr</span>
</pre></div>
</div>
<p>通过索引 <a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.Mapdl.parameters.html#ansys.mapdl.core.Mapdl.parameters" title="ansys.mapdl.core.Mapdl.parameters"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapdl.Parameters</span></code></a> 属性（就像 Python 字典一样），验证数据是否已正确加载到 MAPDL：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">array_from_mapdl</span> <span class="o">=</span> <span class="n">mapdl</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;MYARR&quot;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">array_from_mapdl</span>
<span class="go">array([[0.65516567, 0.96977939, 0.3224993 ],</span>
<span class="go">       [0.58634927, 0.84392263, 0.18152529],</span>
<span class="go">       [0.76719759, 0.45748876, 0.56432361],</span>
<span class="go">       [0.78548338, 0.01042177, 0.57420062],</span>
<span class="go">       [0.33189362, 0.9681039 , 0.47525875]])</span>
</pre></div>
</div>
<section id="download-a-remote-mapdl-file">
<h3>Download a remote MAPDL file<a class="headerlink" href="#download-a-remote-mapdl-file" title="Link to this heading">#</a></h3>
<p>在 gRPC 模式下运行 MAPDL 时，可以使用 <code class="xref py py-class docutils literal notranslate"><span class="pre">Mapdl</span></code> 类
和 <a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.mapdl_grpc.MapdlGrpc.download.html#ansys.mapdl.core.mapdl_grpc.MapdlGrpc.download" title="ansys.mapdl.core.mapdl_grpc.MapdlGrpc.download"><code class="xref py py-func docutils literal notranslate"><span class="pre">Mapdl.download()</span></code></a> 函数列出并下载远程 MAPDL 文件。例如，以下代码列出了远程文件并下载了其中一个：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">remote_files</span> <span class="o">=</span> <span class="n">mapdl</span><span class="o">.</span><span class="n">list_files</span><span class="p">()</span>

<span class="c1"># 确保结果文件是远程文件之一</span>
<span class="k">assert</span> <span class="s2">&quot;file.rst&quot;</span> <span class="ow">in</span> <span class="n">remote_files</span> <span class="c1"># assert(声明)</span>

<span class="c1"># 下载远程结果文件</span>
<span class="n">mapdl</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="s2">&quot;file.rst&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>该功能仅适用于 MAPDL 2021 R1 及更高版本。</p>
</div>
<p>或者，您可以使用 glob 模式或 <a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.mapdl_grpc.MapdlGrpc.download.html#ansys.mapdl.core.mapdl_grpc.MapdlGrpc.download" title="ansys.mapdl.core.mapdl_grpc.MapdlGrpc.download"><code class="xref py py-func docutils literal notranslate"><span class="pre">Mapdl.download()</span></code></a> 方法中的文件名列表一次性下载多个文件：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 使用文件名列表</span>
<span class="n">mapdl</span><span class="o">.</span><span class="n">download</span><span class="p">([</span><span class="s2">&quot;file0.log&quot;</span><span class="p">,</span> <span class="s2">&quot;file1.out&quot;</span><span class="p">])</span>

<span class="c1"># 使用 glob 模式匹配文件列表</span>
<span class="n">mapdl</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="s2">&quot;file*&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>您还可以使用此函数下载 MAPDL 工作目录（<a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.Mapdl.directory.html#ansys.mapdl.core.Mapdl.directory" title="ansys.mapdl.core.Mapdl.directory"><code class="xref py py-func docutils literal notranslate"><span class="pre">Mapdl.directory</span></code></a> ）中的所有文件：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mapdl</span><span class="o">.</span><span class="n">download_project</span><span class="p">()</span>
</pre></div>
</div>
<p>或者按扩展名过滤，如本例所示：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mapdl</span><span class="o">.</span><span class="n">download_project</span><span class="p">(</span>
    <span class="p">[</span><span class="s2">&quot;log&quot;</span><span class="p">,</span> <span class="s2">&quot;out&quot;</span><span class="p">],</span> <span class="n">target_dir</span><span class="o">=</span><span class="s2">&quot;myfiles&quot;</span>
<span class="p">)</span>  <span class="c1"># Download the files to &#39;myfiles&#39; directory</span>
</pre></div>
</div>
</section>
<section id="upload-a-local-mapdl-file">
<h3>Upload a local MAPDL file<a class="headerlink" href="#upload-a-local-mapdl-file" title="Link to this heading">#</a></h3>
<p>您可以使用 <a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.mapdl_grpc.MapdlGrpc.upload.html#ansys.mapdl.core.mapdl_grpc.MapdlGrpc.upload" title="ansys.mapdl.core.mapdl_grpc.MapdlGrpc.upload"><code class="xref py py-func docutils literal notranslate"><span class="pre">Mapdl.upload()</span></code></a> 方法将本地 MAPDL 文件作为远程 MAPDL 实例上传：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># upload a local file</span>
<span class="n">mapdl</span><span class="o">.</span><span class="n">upload</span><span class="p">(</span><span class="s2">&quot;sample.db&quot;</span><span class="p">)</span>

<span class="c1"># ensure the uploaded file is one of the remote files</span>
<span class="n">remote_files</span> <span class="o">=</span> <span class="n">mapdl</span><span class="o">.</span><span class="n">list_files</span><span class="p">()</span>
<span class="k">assert</span> <span class="s2">&quot;sample.db&quot;</span> <span class="ow">in</span> <span class="n">remote_files</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>该功能仅适用于 MAPDL 2021 R1 及更高版本。</p>
</div>
</section>
</section>
<section id="mapdl">
<h2>不支持的 MAPDL 命令及其他注意事项<a class="headerlink" href="#mapdl" title="Link to this heading">#</a></h2>
<p>大多数 MAPDL 命令都已通过 Python 映射到相应的方法中。但是，有些命令不支持，因为它们不适用于交互会话，或者它们需要额外的命令，而这些命令与 MAPDL 服务器处理输入的方式不兼容。</p>
<section id="ref-unsupported-commands">
<span id="id2"></span><h3>不可用的命令<a class="headerlink" href="#ref-unsupported-commands" title="Link to this heading">#</a></h3>
<p>由于各种原因，有些命令在 PyMAPDL 中不可用。</p>
<p>其中有些命令在 Python 环境中没有意义。下面是一些例子：</p>
<ul class="simple">
<li><p>可以用 Python <code class="docutils literal notranslate"><span class="pre">input</span></code> 代替 <code class="docutils literal notranslate"><span class="pre">*ASK</span></code> 命令。</p></li>
<li><p>可以用 Python <code class="docutils literal notranslate"><span class="pre">if</span></code> 语句代替 <code class="docutils literal notranslate"><span class="pre">*IF</span></code> 命令。</p></li>
<li><p>可以调用另一个 Python 函数或模块来代替 <code class="docutils literal notranslate"><span class="pre">*CREATE</span></code> 和 <code class="docutils literal notranslate"><span class="pre">*USE</span></code> 命令。</p></li>
</ul>
<p>其他命令在非图形用户界面会话中没有意义。例如，在非图形用户界面会话中不需要清除图形屏幕的 <code class="docutils literal notranslate"><span class="pre">/ERASE</span></code> 和 <code class="docutils literal notranslate"><span class="pre">ERASE</span></code> 命令。</p>
<p>其他命令会被 MAPDL 忽略，但您仍然可以使用它们。例如，可以使用 <a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.Mapdl.run.html#ansys.mapdl.core.Mapdl.run" title="ansys.mapdl.core.Mapdl.run"><code class="xref py py-func docutils literal notranslate"><span class="pre">mapdl.run(&quot;/BATCH&quot;)</span></code></a> 方法运行 <code class="docutils literal notranslate"><span class="pre">/BATCH</span></code> 命令，该方法会返回以下警告：</p>
<div class="highlight-output notranslate"><div class="highlight"><pre><span></span><span class="go">*** WARNING ***                         CP =       0.519   TIME= 12:04:16</span>
<span class="go">The /BATCH command must be the first line of input.  The /BATCH command</span>
<span class="go">is ignored.</span>
</pre></div>
</div>
<p><a class="reference internal" href="#table-1">Table-1</a> 关于无法使用的命令的全面信息</p>
<p id="table-1"><strong>Table 1. Non-available commands.</strong></p>
<table class="longtable table">
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"><p>MAPDL command</p></th>
<th class="head"><p>Interactive</p></th>
<th class="head"><p>Non-interactive</p></th>
<th class="head"><p>Direct run</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td rowspan="7"><p><strong>GUI commands</strong></p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">*ASK</span></code></p></li>
</ul>
</td>
<td><p>❌ Not available</p></td>
<td><p>❌ Not available</p></td>
<td><p>✔️ Works</p></td>
<td><p>When used in <a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.Mapdl.run.html#ansys.mapdl.core.Mapdl.run" title="ansys.mapdl.core.Mapdl.run"><code class="xref py py-func docutils literal notranslate"><span class="pre">mapdl.run()</span></code></a> it automatically assumes the user input is 0. Use Python <code class="docutils literal notranslate"><span class="pre">input</span></code> instead.</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">*VEDIT</span></code></p></li>
</ul>
</td>
<td><p>❌ Not available</p></td>
<td><p>❌ Not available</p></td>
<td><p>➖ MAPDL shows a warning</p></td>
<td><p>It requires a GUI session to work.</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/ERASE</span></code></p></li>
</ul>
</td>
<td><p>❌ Not available</p></td>
<td><p>❌ Not available</p></td>
<td><p>✔️ Works</p></td>
<td><p>It does not make sense in a non-GUI session.</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ERASE</span></code></p></li>
</ul>
</td>
<td><p>❌ Not available</p></td>
<td><p>❌ Not available</p></td>
<td><p>➖ MAPDL shows a warning</p></td>
<td><p>It does not make sense in a non-GUI session.</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">HELP</span></code></p></li>
</ul>
</td>
<td><p>❌ Not available</p></td>
<td><p>❌ Not available</p></td>
<td><p>➖ Ignored by MAPDL</p></td>
<td><p>It requires a GUI session to work.</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">HELPDISP</span></code></p></li>
</ul>
</td>
<td><p>❌ Not available</p></td>
<td><p>❌ Not available</p></td>
<td><p>➖ Ignored by MAPDL</p></td>
<td><p>It requires a GUI session to work.</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">NOERASE</span></code></p></li>
</ul>
</td>
<td><p>❌ Not available</p></td>
<td><p>❌ Not available</p></td>
<td><p>✔️ Works</p></td>
<td><p>It does not make sense in a non-GUI session.</p></td>
</tr>
<tr class="row-odd"><td rowspan="10"><p><strong>Control flow commands</strong></p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">*CYCLE</span></code></p></li>
</ul>
</td>
<td><p>❌ Not available</p></td>
<td><p>❌ Not available</p></td>
<td><p>✔️ Works</p></td>
<td><p>It is recommended to use Python control flow keywords, in this case <code class="docutils literal notranslate"><span class="pre">continue</span></code>.</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">*DO</span></code></p></li>
</ul>
</td>
<td><p>❌ Not available</p></td>
<td><p>❌ Not available</p></td>
<td><p>✔️ Works</p></td>
<td><p>It is recommended to use Python control flow keywords, in this case <code class="docutils literal notranslate"><span class="pre">for</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">*DOWHILE</span></code></p></li>
</ul>
</td>
<td><p>❌ Not available</p></td>
<td><p>❌ Not available</p></td>
<td><p>✔️ Works</p></td>
<td><p>It is recommended to use Python control flow keywords, in this case <code class="docutils literal notranslate"><span class="pre">while</span></code>.</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">*ELSE</span></code></p></li>
</ul>
</td>
<td><p>❌ Not available</p></td>
<td><p>❌ Not available</p></td>
<td><p>✔️ Works</p></td>
<td><p>It is recommended to use Python control flow keywords, in this case <code class="docutils literal notranslate"><span class="pre">else</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">*ELSEIF</span></code></p></li>
</ul>
</td>
<td><p>❌ Not available</p></td>
<td><p>❌ Not available</p></td>
<td><p>✔️ Works</p></td>
<td><p>It is recommended to use Python control flow keywords, in this case <code class="docutils literal notranslate"><span class="pre">elif</span></code>.</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">*ENDDO</span></code></p></li>
</ul>
</td>
<td><p>❌ Not available</p></td>
<td><p>❌ Not available</p></td>
<td><p>✔️ Works</p></td>
<td><p>It is recommended to use Python control flow keywords.</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">*GO</span></code></p></li>
</ul>
</td>
<td><p>❌ Not available</p></td>
<td><p>❌ Not available</p></td>
<td><p>✔️ Works</p></td>
<td><p>It is recommended to use Python control flow keywords, such as <code class="docutils literal notranslate"><span class="pre">if</span></code> or functions.</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">*IF</span></code></p></li>
</ul>
</td>
<td><p>❌ Not available</p></td>
<td><p>❌ Not available</p></td>
<td><p>✔️ Works</p></td>
<td><p>It is recommended to use Python control flow keywords, in this case <code class="docutils literal notranslate"><span class="pre">continue</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">*REPEAT</span></code></p></li>
</ul>
</td>
<td><p>❌ Not available</p></td>
<td><p>❌ Not available</p></td>
<td><p>✔️ Works</p></td>
<td><p>It is recommended to use Python control flow keywords such as <code class="docutils literal notranslate"><span class="pre">for</span></code> or <code class="docutils literal notranslate"><span class="pre">while</span></code></p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">*RETURN</span></code></p></li>
</ul>
</td>
<td><p>❌ Not available</p></td>
<td><p>❌ Not available</p></td>
<td><p>✔️ Works</p></td>
<td><p>It is recommended to use Python control flow keywords such as <code class="docutils literal notranslate"><span class="pre">break</span></code>, <code class="docutils literal notranslate"><span class="pre">continue</span></code> or <code class="docutils literal notranslate"><span class="pre">return</span></code></p></td>
</tr>
<tr class="row-odd"><td rowspan="4"><p><strong>Others commands</strong></p></td>
<td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">*DEL</span></code></p></li>
</ul>
</td>
<td><p>❌ Not available</p></td>
<td><p>❌ Not available</p></td>
<td><p>✔️ Works</p></td>
<td><p>It is recommended to use Python variables (use Python memory) instead of MAPDL variables.</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/BATCH</span></code></p></li>
</ul>
</td>
<td><p>❌ Not available</p></td>
<td><p>❌ Not available</p></td>
<td><p>➖ Ignored by MAPDL.</p></td>
<td><p>It does not make sense in a PyMAPDL session.</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/EOF</span></code></p></li>
</ul>
</td>
<td><p>❌ Not available</p></td>
<td><p>❌ Not available</p></td>
<td><p>❌ PyMAPDL shows an exception</p></td>
<td><p>To stop the server, use <a class="reference internal" href="../mapdl_commands/session/_autosummary/ansys.mapdl.core.Mapdl.exit.html#ansys.mapdl.core.Mapdl.exit" title="ansys.mapdl.core.Mapdl.exit"><code class="xref py py-func docutils literal notranslate"><span class="pre">mapdl.exit()</span></code></a></p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">UNDO</span></code></p></li>
</ul>
</td>
<td><p>❌ Not available</p></td>
<td><p>❌ Not available</p></td>
<td><p>➖ MAPDL shows a warning</p></td>
<td><p>It does not undo any command.</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p><strong>Interactive（交互式）</strong> 是指 MAPDL 中有一个方法，例如 <a class="reference internal" href="../mapdl_commands/session/_autosummary/ansys.mapdl.core.Mapdl.prep7.html#ansys.mapdl.core.Mapdl.prep7" title="ansys.mapdl.core.Mapdl.prep7"><code class="xref py py-func docutils literal notranslate"><span class="pre">Mapdl.prep7()</span></code></a> 方法。</p></li>
<li><p><strong>Non-interactive</strong> 表示在 <a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.Mapdl.non_interactive.html#ansys.mapdl.core.Mapdl.non_interactive" title="ansys.mapdl.core.Mapdl.non_interactive"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapdl.non_interactive</span></code></a> 上下文块、 <a class="reference internal" href="../mapdl_commands/session/_autosummary/ansys.mapdl.core.Mapdl.input.html#ansys.mapdl.core.Mapdl.input" title="ansys.mapdl.core.Mapdl.input"><code class="xref py py-func docutils literal notranslate"><span class="pre">Mapdl.input()</span></code></a> 方法或 <a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.Mapdl.input_strings.html#ansys.mapdl.core.Mapdl.input_strings" title="ansys.mapdl.core.Mapdl.input_strings"><code class="xref py py-func docutils literal notranslate"><span class="pre">Mapdl.input_strings()</span></code></a> 方法中运行。例如</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">mapdl</span><span class="o">.</span><span class="n">non_interactive</span><span class="p">:</span>
    <span class="n">mapdl</span><span class="o">.</span><span class="n">prep7</span><span class="p">()</span>
</pre></div>
</div>
</li>
<li><p><strong>Direct run</strong> 是指使用 <a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.Mapdl.run.html#ansys.mapdl.core.Mapdl.run" title="ansys.mapdl.core.Mapdl.run"><code class="xref py py-func docutils literal notranslate"><span class="pre">mapdl.run()</span></code></a> 方法来运行 MAPDL 命令。
例如 <a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.Mapdl.run.html#ansys.mapdl.core.Mapdl.run" title="ansys.mapdl.core.Mapdl.run"><code class="xref py py-func docutils literal notranslate"><span class="pre">mapdl.run(&quot;/PREP7&quot;)</span></code></a> 方法。</p></li>
</ul>
</div>
<p>请注意，使用 <a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.Mapdl.run.html#ansys.mapdl.core.Mapdl.run" title="ansys.mapdl.core.Mapdl.run"><code class="xref py py-func docutils literal notranslate"><span class="pre">mapdl.run()</span></code></a> 方法运行这些命令不会导致 MAPDL 退出。但是，它可能会引发异常。</p>
<p>这些 MAPDL 命令也可以使用 <a class="reference internal" href="../mapdl_commands/session/_autosummary/ansys.mapdl.core.Mapdl.input.html#ansys.mapdl.core.Mapdl.input" title="ansys.mapdl.core.Mapdl.input"><code class="xref py py-func docutils literal notranslate"><span class="pre">mapdl.input()</span></code></a> 方法或 <a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.Mapdl.input_strings.html#ansys.mapdl.core.Mapdl.input_strings" title="ansys.mapdl.core.Mapdl.input_strings"><code class="xref py py-func docutils literal notranslate"><span class="pre">mapdl.input_strings()</span></code></a> 方法执行。结果应与在正常批处理 MAPDL 会话中运行相同。</p>
</section>
<section id="ref-unsupported-interactive-commands">
<span id="id3"></span><h3>不支持的 “交互式” 命令<a class="headerlink" href="#ref-unsupported-interactive-commands" title="Link to this heading">#</a></h3>
<p>以下命令只能在非交互模式下运行（在 <a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.Mapdl.non_interactive.html#ansys.mapdl.core.Mapdl.non_interactive" title="ansys.mapdl.core.Mapdl.non_interactive"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapdl.non_interactive</span></code></a> 块内或使用 <a class="reference internal" href="../mapdl_commands/session/_autosummary/ansys.mapdl.core.Mapdl.input.html#ansys.mapdl.core.Mapdl.input" title="ansys.mapdl.core.Mapdl.input"><code class="xref py py-func docutils literal notranslate"><span class="pre">mapdl.input()</span></code></a> 方法）。</p>
<p><a class="reference internal" href="#table-2">Table-2</a> 提供有关不受支持的“交互式”命令的全面信息。</p>
<p id="table-2"><strong>Table 2. Non-interactive only commands.</strong></p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"><p>Interactive</p></th>
<th class="head"><p>Non-interactive</p></th>
<th class="head"><p>Direct Run</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">*CREATE</span></code></p></li>
</ul>
</td>
<td><p>❌ Not available</p></td>
<td><p>✔️ Available</p></td>
<td><p>➖ Only in <a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.Mapdl.non_interactive.html#ansys.mapdl.core.Mapdl.non_interactive" title="ansys.mapdl.core.Mapdl.non_interactive"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapdl.non_interactive</span></code></a></p></td>
<td><p>It is recommended to create Python functions instead.</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CFOPEN</span></code></p></li>
</ul>
</td>
<td><p>❌ Not available</p></td>
<td><p>✔️ Available</p></td>
<td><p>➖ Only in <a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.Mapdl.non_interactive.html#ansys.mapdl.core.Mapdl.non_interactive" title="ansys.mapdl.core.Mapdl.non_interactive"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapdl.non_interactive</span></code></a></p></td>
<td><p>It is recommended to use Python functions such as <code class="docutils literal notranslate"><span class="pre">open</span></code>.</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CFCLOSE</span></code></p></li>
</ul>
</td>
<td><p>❌ Not available</p></td>
<td><p>✔️ Available</p></td>
<td><p>➖ Only in <a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.Mapdl.non_interactive.html#ansys.mapdl.core.Mapdl.non_interactive" title="ansys.mapdl.core.Mapdl.non_interactive"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapdl.non_interactive</span></code></a></p></td>
<td><p>It is recommended to use Python functions such as <code class="docutils literal notranslate"><span class="pre">open</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">*VWRITE</span></code></p></li>
</ul>
</td>
<td><p>❌ Not available</p></td>
<td><p>✔️ Available</p></td>
<td><p>➖ Only in <a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.Mapdl.non_interactive.html#ansys.mapdl.core.Mapdl.non_interactive" title="ansys.mapdl.core.Mapdl.non_interactive"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapdl.non_interactive</span></code></a></p></td>
<td><p>If you are working in a local session, it is recommended you use Python function such as <code class="docutils literal notranslate"><span class="pre">open</span></code>.</p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LSWRITE</span></code></p></li>
</ul>
</td>
<td><p>✔️ Available (Internally running in <a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.Mapdl.non_interactive.html#ansys.mapdl.core.Mapdl.non_interactive" title="ansys.mapdl.core.Mapdl.non_interactive"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapdl.non_interactive</span></code></a>)</p></td>
<td><p>✔️ Available</p></td>
<td><p>➖ Only in <a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.Mapdl.non_interactive.html#ansys.mapdl.core.Mapdl.non_interactive" title="ansys.mapdl.core.Mapdl.non_interactive"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Mapdl.non_interactive</span></code></a></p></td>
<td></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id4">
<h2>环境变量<a class="headerlink" href="#id4" title="Link to this heading">#</a></h2>
<p>有几个 PyMAPDL 特定的环境变量可以用来控制 PyMAPDL 和 MAPDL 的行为或启动。下表列出了这些变量：</p>
<table class="table">
<tbody>
<tr class="row-odd"><td><p><span class="target" id="index-0"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYMAPDL_START_INSTANCE</span></code></p></td>
<td><p>Override the behavior of the
<a class="reference internal" href="../api/_autosummary/ansys.mapdl.core.launcher.launch_mapdl.html#ansys.mapdl.core.launcher.launch_mapdl" title="ansys.mapdl.core.launcher.launch_mapdl"><code class="xref py py-func docutils literal notranslate"><span class="pre">ansys.mapdl.core.launcher.launch_mapdl()</span></code></a> function
to only attempt to connect to existing
instances of PyMAPDL. Generally used
in combination with <code class="docutils literal notranslate"><span class="pre">PYMAPDL_PORT</span></code>.</p>
<p><strong>Example:</strong></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">export PYMAPDL_START_INSTANCE=True</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p><span class="target" id="index-1"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYMAPDL_PORT</span></code></p></td>
<td><p>Default port for PyMAPDL to connect to.</p>
<p><strong>Example:</strong></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">export PYMAPDL_PORT=50052</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p><span class="target" id="index-2"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYMAPDL_IP</span></code></p></td>
<td><p>Default IP for PyMAPDL to connect to.</p>
<p><strong>Example:</strong></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">export PYMAPDL_IP=123.45.67.89</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p><span class="target" id="index-3"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">ANSYSLMD_LICENSE_FILE</span></code></p></td>
<td><p>License file or IP address with port in the format
<code class="docutils literal notranslate"><span class="pre">PORT&#64;IP</span></code>. Do not confuse with the <code class="docutils literal notranslate"><span class="pre">IP</span></code> and
<code class="docutils literal notranslate"><span class="pre">PORT</span></code> where the MAPDL instance is running, which
are specified using <span class="target" id="index-4"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYMAPDL_IP</span></code> and
<span class="target" id="index-5"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYMAPDL_PORT</span></code>.
This is helpful for supplying licensing for
Docker.</p>
<p><strong>Example:</strong></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">export ANSYSLMD_LICENSE_FILE=1055@123.45.67.89</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p><span class="target" id="index-6"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYMAPDL_MAPDL_EXEC</span></code></p></td>
<td><p>Executable path from where to launch MAPDL
instances.</p>
<p><strong>Example:</strong></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">export PYMAPDL_MAPDL_EXEC=/ansys_inc/v222/ansys/bin/mapdl</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p><span class="target" id="index-7"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYMAPDL_MAPDL_VERSION</span></code></p></td>
<td><p>Default MAPDL version to launch in case there
are several versions availables.</p>
<p><strong>Example:</strong></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">export PYMAPDL_MAPDL_VERSION=22.2</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p><span class="target" id="index-8"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYMAPDL_MAX_MESSAGE_LENGTH</span></code></p></td>
<td><p>Maximum gRPC message length. If your
connection terminates when running
PRNSOL or NLIST, raise this. In bytes,
defaults to 256 MB.</p>
<p>Only for developing purposes.</p>
</td>
</tr>
</tbody>
</table>
</section>
</section>


                </article>
              
              
              
              
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">

  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">Overview</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#selecting-entities">Selecting entities</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#running-in-non-interactive-mode">Running in non-interactive mode</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#how-the-non-interactive-context-manager-works">How the non-interactive context manager works</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mapdl-macros">MAPDL macros</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#additional-options-when-running-commands">Additional options when running commands</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#running-several-commands-or-an-input-file">Running several commands or an input file</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">条件语句和循环</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#warnings-and-errors">Warnings and errors</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#prompts">Prompts 提示</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#apdl-command-logging">APDL command logging</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#use-the-lgwrite-method">Use the <code class="docutils literal notranslate"><span class="pre">lgwrite</span></code> method</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#interactive-breakpoint">Interactive breakpoint 交互式断点</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#run-a-batch-job">Run a batch job</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#chain-commands-in-mapdl">Chain commands in MAPDL</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sending-arrays-to-mapdl">Sending arrays to MAPDL</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#download-a-remote-mapdl-file">Download a remote MAPDL file</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#upload-a-local-mapdl-file">Upload a local MAPDL file</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#mapdl">不支持的 MAPDL 命令及其他注意事项</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ref-unsupported-commands">不可用的命令</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ref-unsupported-interactive-commands">不支持的 “交互式” 命令</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">环境变量</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item"> 
<div class="tocsection editthispage">
  <a href="https://github.com/ansys/pymapdl/edit/main/doc/source/user_guide/mapdl.rst">
    <i class="fa-solid fa-pencil"></i>
       Edit
    on GitHub  
  </a>
</div>

</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=5b4479735964841361fd"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd"></script>

<footer class="bd-footer" font-size="4px">
  <div class="bd-footer__inner bd-page-width">
    <div class="footer-items__start">
      <div class="footer-item">
        <p class="copyright">
          PyMAPDL 0.68.0 © Copyright (c) 2024 ANSYS, Inc. All rights reserved.
          <br>
        </p>
      </div>
    </div>
    <div class="footer-items__end">
      <div class="footer-item">
        <p class="theme-version">
          Built with the
          <a href="https://sphinxdocs.ansys.com/version/stable/index.html">Ansys Sphinx Theme</a>
          0.14.1. and
           <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
          on <span id="date"></span>
        </p>
        <script>
          var options = { day: "numeric", month: "long", year: "numeric" };
          var lastModifiedDate = new Date(document.lastModified);
          var date = lastModifiedDate.toLocaleDateString("en-US", options);
          document.getElementById("date").innerHTML = date;
        </script>
      </div>
    </div>
  </div>
</footer>

  </body>
</html>